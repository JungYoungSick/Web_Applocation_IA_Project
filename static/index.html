<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="index.css" type="text/css"/>
    <style></style>
  </head>
  <form action="" method="get">
  <body>
    <!-- 레이아웃. -->
    <div id="root">
      <!-- 첫번째 내용. -->
      <div>
        <div>
          <h1></h1>
        </div>
      </div>
      <!-- 두번째 내용. -->
      <div>
        <!-- 햄버거 메뉴 이미지 넣기. -->
        <div id="bergerMenu">🌐</div>
        <!-- All surch box + button -->
        <div>
          <input type="search" name="serchBox" id="serchBox" />
          <button>검색</button>
        </div>
      </div>
      <!-- 세번째 내용. -->
      <div>
        <form class="infopos" method="get">
          <div id="userInfo">
            <h2 style="text-align: center; margin-bottom: 10px">User Info</h2>
            <div class="box1">
              <label for="userName">User : </label>
              <input type="text" name="user" id="userName" />
            </div>
            <div class="box2">
              <label for="Assistant"
                >Assistant : <span id="status">Online</span></label
              >
              <input type="checkbox" name="Assistant" id="Assistant" />
            </div>
            <div class="box3">
              <label for="userAvatar">userAvatar</label>
              <div type="text" name="userAvatar" id="userAvatar">👤</div>
            </div>
          </div>
        </form>
        <div id="promptMain">
          <div id="promptBox">
            <textarea id="prompt" style="white-space: pre-line"></textarea>
            <div>
              <input type="text" name="textBar" id="textBar" />
              <input
                type="button"
                name="textButton"
                id="textButton"
                value="보내기"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
    <script>
      const root = document.getElementById("root");
      const checkbox = document.getElementById("Assistant");
      const statusMessage = document.getElementById("status");
      const textBar = document.getElementById("textBar");
      const textButton = document.getElementById("textButton");
      const prompt = document.getElementById("prompt");


      // 체크박스 상태 변경 시 이벤트 핸들러 등록
      checkbox.addEventListener("change", function () {
        if (checkbox.checked) {
          statusMessage.textContent = "Offline";
        } else {
          statusMessage.textContent = "Online";
        }
      });

      // HTML 요소에 대한 참조 가져오기

      // "보내기" 버튼을 클릭할 때 실행할 함수 정의
      function sendMessage() {
        const message = textBar.value; // textBar 입력 값 가져오기
        const options = { hour: "2-digit", minute: "2-digit" };
        const currentTime = new Date().toLocaleTimeString(undefined, options);
        // 현재 시간 가져오기
        const userName = document.getElementById("userName");
        // const userName2 = userName.Input.value;
        // prompt에 메시지와 시간 추가
        prompt.value += `${userName}:${message}(${currentTime})\n`;

        // textBar 내용 비우기
        textBar.value = "";
      }


      textButton.addEventListener("click",() =>{
        const text = textBar.value;
        if(text) {
          const textData = {text};
          fetch('/jys/text', {
          method: 'post',
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(textData),
        })
          .then((response) => response.json())
          .then((data) => {
            
            
        })
        }})
      // "textBar"에서 Enter 키를 누를 때 "보내기" 함수 실행
      // textBar.addEventListener("keyup", (event) => {
      //   if (event.key === "Enter") {
      //     event.preventDefault();
      //     event.stopPropagation();
      //     sendMessage();
      //     textButton.blur("click"); // 버튼의 포커스 해제
      //   }
      // });
    </script>
  </body>
</html>
