<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="index.css" type="text/css"/>
    <style></style>
  </head>
  <form action="" method="get">
  <body>
    <!-- ë ˆì´ì•„ì›ƒ. -->
    <div id="root">
      <!-- ì²«ë²ˆì§¸ ë‚´ìš©. -->
      <div>
        <div>
          <h1></h1>
        </div>
      </div>
      <!-- ë‘ë²ˆì§¸ ë‚´ìš©. -->
      <div>
        <!-- í–„ë²„ê±° ë©”ë‰´ ì´ë¯¸ì§€ ë„£ê¸°. -->
        <div>
          <div id="menuButton" >ğŸŒ</div>
          <div id="menuContainer" >
            <ul id="bergerMenu" class="hidden">
              <li>Home</li>
              <li>Profile</li>
              <li>Settings</li>
              <li>Logout</li>
            </ul>
          </div>
        </div>
        <!-- All surch box + button -->
        <div>
          <input type="search" name="serchBox" id="serchBox" />
          <button>ê²€ìƒ‰</button>
        </div>
      </div>
      <!-- ì„¸ë²ˆì§¸ ë‚´ìš©. -->
      <div>
        <!-- <form method="get"> -->
          <div id="infoBax">
            <div id="userInfo">
              <h2 style="text-align: center; margin-bottom: 10px">User Info</h2>
              <div class="box1">
                <label for="userName">User :</label>
                <div type="text" name="user" id="userName">John Doe</div>
              </div>
              <div class="box2">
                <label for="Assistant"
                  >Assistant : <span id="status">Online</span></label
                >
                <input type="checkbox" name="Assistant" id="Assistant" />
              </div>
              <div class="box3">
                <label for="userAvatar">userAvatar</label>
                <div type="text" name="userAvatar" id="userAvatar">ğŸ‘¤</div>
              </div>
            </div>
          </div>
        <!-- </form> -->
        <div id="promptMain">
          <div id="promptBox">
            <textarea id="prompt" style="white-space: pre-line"></textarea>
            <div>
              <input type="text" name="textBar" id="textBar" />
              <input
                type="button"
                name="textButton"
                id="textButton"
                value="ë³´ë‚´ê¸°"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
  <script>
    const root = document.getElementById("root");
    const checkbox = document.getElementById("Assistant");
    const statusMessage = document.getElementById("status");
    const textBar = document.getElementById("textBar");
    const textButton = document.getElementById("textButton");
    const prompt = document.getElementById("prompt");
    const options = { hour: "2-digit", minute: "2-digit" };
    const currentTime = new Date().toLocaleTimeString(undefined, options);
    const userName = document.getElementById("userName");
    
    //í–„ë²„ê±° ë²„íŠ¼ ë§Œë“¤ê¸°.
    const menuButton = document.getElementById('menuButton');
    const bergerMenu = document.getElementById('bergerMenu');
    let isMenuVisible = true;

    menuButton.addEventListener('click', () => {
    isMenuVisible = !isMenuVisible;
    if (isMenuVisible) {
      bergerMenu.style.display = 'none';
    } else {
      bergerMenu.style.display = 'inline'; // ë˜ëŠ” 'block'
    }
    });

    // ì²´í¬ë°•ìŠ¤ë¥¼ ì´ìš©í•œ on/off-line í‘œì‹œ
      checkbox.addEventListener("change", function () {
        if (checkbox.checked) {
          statusMessage.textContent = "Off-line";
        } else {
          statusMessage.textContent = "On-line";
        }
      });
      const name = userName.textContent
      textButton.addEventListener("click",() =>{
        const text = textBar.value;
        if(text) {
          const textData = {userName, text, currentTime};
          fetch('/jys/text', {
          method: 'POST',
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(textData),
          
        })
          .then((response) => response.json())
          .then((data) => {
            prompt.value += name+"  "+text+"  "+currentTime+"\n";
            textBar.value = "";
        });
        }
        });
        
        // í”„ë¡¬í”„íŠ¸ getë°©ì‹ ì „ë‹¬ ì‘ì—… í•˜ë‹¤ê°€ ë§ì•˜ë‹¤. 
        prompt.
        fetch('prompt'), {
          method:"get",
          headers: {
            "Content-Type": "application/json"
          },
          body:JSON.stringify(prompt)
        }
    </script>
  </body>
</html>
